:: **** use the "-s WASM" switch to compile WebAssembly output. warning: the SINGLE_FILE approach does NOT currently work in Chrome 63.. ****
emcc.bat -DUNIX -DSTYPE_INT16 -DNODEBUG -DNOSOUND -s WASM=0 -Os -O3 -s ASSERTIONS=1 -s SAFE_HEAP=0  -s VERBOSE=0  -Wno-pointer-sign --closure 1 --llvm-lto 1 -I./src -I./src/psynth --memory-init-file 0  -s FORCE_FILESYSTEM=1 -s NO_FILESYSTEM=0 adapter.cpp src/core/code/debug.cpp src/memory/code/memory.cpp  src/filesystem/code/v3nus_fs.cpp src/sound/code/sound_sndout.cpp src/time/code/timemanager.cpp src/utils/code/utils.cpp src/sunvox_engine.cpp src/psynth/psynth_net.cpp src/psynth/psynths_echo.cpp src/psynth/psynths_filter.cpp src/psynth/psynths_generator.cpp src/psynth/psynths_kicker.cpp src/psynth/psynths_sampler.cpp src/psynth/psynths_distortion.cpp src/psynth/psynths_flanger.cpp src/psynth/psynths_spectravoice.cpp src/psynth/psynths_loop.cpp src/psynth/psynths_delay.cpp src/psynth/psynths_fm.cpp src/psynth/psynths_lfo.cpp src/psynth/psynths_reverb.cpp src/psynth/psynths_vocal_filter.cpp -s EXPORTED_FUNCTIONS="['_load_song_file', '_get_soundbuffer', '_get_soundbuffer_len', '_compute_audio_samples', '_emu_get_max_position', '_emu_get_current_position', '_emu_get_track_info', '_emu_teardown', '_malloc', '_free']" -o htdocs/sunvox.js -s SINGLE_FILE=0 -s EXTRA_EXPORTED_RUNTIME_METHODS="['ccall', 'Pointer_stringify']"  -s BINARYEN_ASYNC_COMPILATION=1 -s BINARYEN_TRAP_MODE='clamp' && copy /b shell-pre.js + htdocs\sunvox.js + shell-post.js htdocs\sunvox3.js && del htdocs\sunvox.js && copy /b htdocs\sunvox3.js + sunvox_adapter.js htdocs\backend_sunvox.js && del htdocs\sunvox3.js